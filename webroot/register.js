function registerbutton(url) {
    const name = document.querySelector("#name").value;
    const uname = document.querySelector("#uname").value;
    const password = document.querySelector("#password").value;
    const password2 = document.querySelector("#password2").value;

    const params = "name=" + name + "&uname=" + uname + "&password=" + password + "&password2=" + password2;
    const target = url + "register.php?" + params;
    const xhr = new XMLHttpRequest();
    xhr.open("POST", target);
    xhr.setRequestHeader('Accept', 'text/plain');
    xhr.setRequestHeader("Content-Type", "application/x-www-form-urlencoded");
    xhr.onreadystatechange = function () {
        if (xhr.readyState === 4 && xhr.status == 302) {
            window.location.replace(xhr.responseText);
        }
        if (xhr.readyState === 4 && xhr.status == 400) {
            document.querySelector("#alert").innerHTML = "&nbsp;";
            delay(100).then(() => document.querySelector("#alert").innerHTML = xhr.responseText); // UI BÃ–S LOL
        }
    };
    xhr.send(params);
}

function delay(time) {
    return new Promise(resolve => setTimeout(resolve, time));
}

document.addEventListener("keyup", function (event) {
    if (event.keyCode === 13) {
        event.preventDefault();
        registerbutton("");
    }
});
  
  