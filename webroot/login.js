function loginbutton(url) {
    const uname = document.querySelector("#uname").value;
    const pwd = document.querySelector("#pwd").value;

    const params = "uname=" + uname + "&pwd=" + pwd;
    const target = url + "login.php?" + params;
    const xhr = new XMLHttpRequest();
    xhr.open("POST", target);
    xhr.setRequestHeader('Accept', 'text/plain');
    xhr.setRequestHeader("Content-Type", "application/x-www-form-urlencoded");
    xhr.onreadystatechange = function () {
        if (xhr.readyState === 4 && xhr.status == 302) {
            window.location.replace(xhr.responseText);
        }
        if (xhr.readyState === 4 && xhr.status == 401) {
            if (xhr.responseText == "WRONG_CREDENTIALS") {
                document.querySelector("#alert").innerHTML = "&nbsp;";
                delay(100).then(() => document.querySelector("#alert").innerHTML = xhr.responseText); // UI BÃ–S LOL
            }
        }
    };
    xhr.send(params);
}

function delay(time) {
    return new Promise(resolve => setTimeout(resolve, time));
}

document.addEventListener("keyup", function (event) {
    if (event.keyCode === 13) {
        event.preventDefault();
        loginbutton("");
    }
});
  
  